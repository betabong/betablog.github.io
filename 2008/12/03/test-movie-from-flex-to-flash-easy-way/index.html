<!DOCTYPE html>
<html>
<head>
<title>Betablog: Test Movie from Flex to Flash (easy way)</title>
<meta content='I figured a much much easier (compared to this) way to trigger Test Movie in Flash IDE from within Flex. What you’ll still need is Ant (here’s how to install' name='description'>
<meta charset='utf-8'>
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<meta content='IE=edge' http-equiv='X-UA-Compatible'>
<meta content='True' name='HandheldFriendly'>
<meta content='320' name='MobileOptimized'>
<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
<link href="/images/favicon.ico" rel="icon" type="image/ico" />
<link href="/stylesheets/application.css" rel="stylesheet" type="text/css" />
</head>
<body class='post-template tag-getting-started'>
<main class='content' role='main'>
<article class='post tag-getting-started'>
<header class='post-header'>
<a class='blog-logo' href='/'>
<span class='blog-title'>Betablog</span>
</a>
</header>
<span class='post-meta'>
<time datetime='2008-12-03'>
03 Dec 2008
</time>
</span>
<h1 class='post-title'>Test Movie from Flex to Flash (easy way)</h1>
<section class='post-content'><p>I figured a much much easier (<a href="/2008/11/29/flex-builder-t-flash-ide">compared to this</a>) way to trigger Test Movie in Flash IDE from within Flex. What you&rsquo;ll still need is Ant (<a href="http://blog.jodybrewster.net/2008/04/09/installing-ant-in-flex-builder-3/">here&rsquo;s how to install</a>), but that&rsquo;s all you gonna need apart from Flex Builder and Flash. That&rsquo;s the simplest ant build file to achieve this: </p>
<pre class="highlight xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"Publish"</span> <span class="na">default=</span><span class="s">"Publish"</span> <span class="na">basedir=</span><span class="s">"./"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- project specifics --&gt;</span>
    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"Publish"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;concat</span> <span class="na">destfile=</span><span class="s">"build.jsfl"</span><span class="nt">&gt;</span>
            fl.getDocumentDOM().testMovie();
        <span class="nt">&lt;/concat&gt;</span>
        <span class="nt">&lt;exec</span> <span class="na">executable=</span><span class="s">"open"</span> <span class="na">failonerror=</span><span class="s">"true"</span> <span class="na">logerror=</span><span class="s">"true"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;arg</span> <span class="na">line=</span><span class="s">"build.jsfl"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/exec&gt;</span>
        <span class="nt">&lt;delete</span> <span class="na">file=</span><span class="s">"build.jsfl"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/target&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre>

<p>This tests the frontmost document in Flash IDE. (basically what does <a href="http://theflashblog.com/?p=482">this plugin</a>). Tested on Mac OS X 10.5.5 with Flex Builder Pro 3.0.2 and Flash CS4. No need for <a href="http://www.mikechambers.com/blog/2008/05/02/flashcommand-for-os-x-updated-to-work-with-flash-cs3/">FlashCommand</a>. No need to alter the file for other projects. Just a super easy file for people with not too many requirements. You can still go more advanced with something like that: </p>
<pre class="highlight xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"Build Project"</span> <span class="na">default=</span><span class="s">"Publish and Test"</span> <span class="na">basedir=</span><span class="s">"../"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- common --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"browser"</span> <span class="na">value=</span><span class="s">"Safari"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"log.path"</span> <span class="na">value=</span><span class="s">"${user.home}/Library/Preferences/Macromedia/Flash Player/Logs/flashlog.txt"</span><span class="nt">/&gt;</span>

    <span class="c">&lt;!-- project specifics --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fla.path"</span> <span class="na">value=</span><span class="s">"${basedir}/main.fla"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"swf.path"</span> <span class="na">value=</span><span class="s">"${basedir}/result.swf"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"test.path"</span> <span class="na">value=</span><span class="s">"http://localhost/projects/test/index.html"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"Publish and Test"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;antcall</span> <span class="na">target=</span><span class="s">"Publish"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;antcall</span> <span class="na">target=</span><span class="s">"Clear Log"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;antcall</span> <span class="na">target=</span><span class="s">"Open in Browser"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/target&gt;</span>

    <span class="c">&lt;!-- publish swf --&gt;</span>
    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"Publish"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;concat</span> <span class="na">destfile=</span><span class="s">"build.jsfl"</span><span class="nt">&gt;</span>
            var sourceFile = "#FLA#";
            var outputFile = "#SWF#";
            var doc = fl.getDocumentDOM();
            if ( !doc || sourceFile.indexOf( doc.path ) <span class="ni">&amp;lt;</span> 0 ) {
                doc = fl.openDocument(sourceFile);
            }
            doc.exportSWF(outputFile, true);
            <span class="nt">&lt;filterchain&gt;</span>
                <span class="nt">&lt;replacetokens</span> <span class="na">begintoken=</span><span class="s">"#"</span> <span class="na">endtoken=</span><span class="s">"#"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;token</span> <span class="na">key=</span><span class="s">"FLA"</span> <span class="na">value=</span><span class="s">"file:///${fla.path}"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;token</span> <span class="na">key=</span><span class="s">"SWF"</span> <span class="na">value=</span><span class="s">"file:///${swf.path}"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/replacetokens&gt;</span>
            <span class="nt">&lt;/filterchain&gt;</span>
        <span class="nt">&lt;/concat&gt;</span>
        <span class="nt">&lt;exec</span> <span class="na">executable=</span><span class="s">"open"</span> <span class="na">failonerror=</span><span class="s">"true"</span> <span class="na">logerror=</span><span class="s">"true"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;arg</span> <span class="na">line=</span><span class="s">"build.jsfl"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/exec&gt;</span>
        <span class="nt">&lt;delete</span> <span class="na">file=</span><span class="s">"build.jsfl"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/target&gt;</span>


    <span class="c">&lt;!-- Open in local browser --&gt;</span>
    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"Open in Browser"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;exec</span> <span class="na">executable=</span><span class="s">"open"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;arg</span> <span class="na">line=</span><span class="s">"-a ${browser} ${test.path}"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/exec&gt;</span>
    <span class="nt">&lt;/target&gt;</span>

    <span class="c">&lt;!-- Clear Debug Log --&gt;</span>
    <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"Clear Log"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;concat</span> <span class="na">destfile=</span><span class="s">"${log.path}"</span><span class="nt">&gt;</span>                                                                                                            
        .: Sev Log File :.

<span class="nt">&lt;/concat&gt;</span>
        <span class="nt">&lt;exec</span> <span class="na">executable=</span><span class="s">"open"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;arg</span> <span class="na">line=</span><span class="s">"-a console '${log.path}'"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/exec&gt;</span>
    <span class="nt">&lt;/target&gt;</span>

<span class="nt">&lt;/project&gt;</span>
</code></pre>

<p>This has pretty much the same results as <a href="/2008/11/29/flex-builder-t-flash-ide/">posted here</a>. I have created a Flex Project that contains all necessary files (fla, main class, build file). Just download and import into Flex: <a href="http://blog.betabong.com/uploads/2008/12/flaproject.zip"> Download Flex Project</a> *<em>Update: *</em>Mirko Sablijic sent me a Hello World project for Windows (he runs Vista): <a href="http://blog.betabong.com/uploads/2008/12/helloworld.zip">Download Flex Project (Windows)</a></p>

<h2>Comments</h2>

<p><strong><a title="2008-12-04 21:27:19" href="#9">psych</a>:</strong> Hi, I tried running the example build file with ant but got the following error: CreateProcess: open build.jsfl error=2 Any idea what might be wrong? thanks</p>

<p><strong><a title="2008-12-05 05:32:22" href="#10">betabong</a>:</strong> That means the file build.jsfl can&rsquo;t be found. My only spontaneous idea would be that it&rsquo;s already been removed, or never been written (though in the last case you should have gotten an error at the concat command). Is this reproducable, does it happen every time?</p>

<p><strong><a title="2008-12-06 13:57:28" href="#11">psych</a>:</strong> I think i found what&rsquo;s causing the problem, it seams to be &lsquo;path&rsquo; related. If i just display the value of the ${fla.path} ant variable i get the correct path: ${fla.path} displays in my example: C:\Users\Mirko\workspace\Flex\HelloWorld\HelloWorld.fla which is correct,but in the jsfl part: var sourceFile = &ldquo;#FLA#&rdquo;; if i trace the sourceFile value: fl.trace(sourceFile); i get the following malformed (without &rsquo;\&rsquo;) path: C:UsersMirkoworkspaceFlexHelloWorldHelloWorld.fla So i am not sure why this happens :/ I am using FB 3 and Flash CS4 IDE on Vista OS. Any ideas?</p>

<p><strong><a title="2008-12-06 14:11:11" href="#12">betabong</a>:</strong> Yeah, it&rsquo;s about the back slashes – in javascript they&rsquo;ll be interpreted as special characters (like \t for tab or \r for carriage return). Try adding two backslashes (\ will become \): C:\Users\Mirko\workspace\Flex\HelloWorld\HelloWorld.fla That should do the trick. I&rsquo;m not sure though about the command line stuff in windows - wether it behaves the same as in OS X (which after all is a unix system). Let us know if you&rsquo;re lucky – I&rsquo;m sure there are other win users trying to achieve this.</p>

<p><strong><a title="2009-03-15 21:35:20" href="#26">Riccardo Bartoli</a>:</strong> Why are you using the tag?</p>

<p><strong><a title="2010-02-01 19:47:10" href="#77">Jeff</a>:</strong> I downloaded your flex project and tried to run it on a mac but when I launch the Publish command it switches to Flash (cs4) but doesnt launch it. Also the Document Class for main.fla doesnt match up with Main.as&hellip; Thanks!</p>
</section>
<footer class='post-footer'>
<section class='author'>
<h4>Severin Klaus</h4>
<p>@betabong.</p>
</section>
<section class='share'>
<h4>Share this post</h4>
<a class='icon-twitter' href='https://twitter.com/share?text=Test Movie from Flex to Flash (easy way)&amp;amp;url=http://blog.betabong.com/2008/12/03/test-movie-from-flex-to-flash-easy-way/' onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
<span class='hidden'>Twitter</span>
</a>
<a class='icon-facebook' href='https://www.facebook.com/sharer/sharer.php?u=http://blog.betabong.com/2008/12/03/test-movie-from-flex-to-flash-easy-way/' onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
<span class='hidden'>Facebook</span>
</a>
<a class='icon-google-plus' href='https://plus.google.com/share?url=http://blog.betabong.com/2008/12/03/test-movie-from-flex-to-flash-easy-way/' onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
<span class='hidden'>Google+</span>
</a>
</section>
</footer>
</article>
</main>

<footer class='site-footer'>
<a class='subscribe icon-feed' href='/feed.xml'>
<span class='tooltip'>Subscribe!</span>
</a>
<div class='inner'>
<section class='copyright'>
All content copyright
<a href="/">Betablog</a>
&copy;
2015
&bull; All rights reserved.
</section>
<section class='poweredby'>
Proudly published with
<a href='http://middlemanapp.com'>Middleman</a>
</section>
<section class='poweredby'>
Casper theme powered by
<a class='icon-ghost' href='https://ghost.org'>Ghost</a>
</section>
</div>
</footer>
<link href='//fonts.googleapis.com/css?family=Old+Standard+TT:400,400italic,700' rel='stylesheet' type='text/css'>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-359384-6', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
